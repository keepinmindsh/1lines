<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>1Lines - Node JS</title>

    <!-- Bootstrap core CSS-->
    <link href="../../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template-->
    <link href="../../vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">

    <!-- Page level plugin CSS-->
    <link href="../../vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="../../css/sb-admin.css" rel="stylesheet">
    <link rel="stylesheet" href="../../styles/default.css">
    <script src="../../highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>

  <body id="page-top">

    <nav class="navbar navbar-expand navbar-dark bg-dark static-top">

      <a class="navbar-brand mr-1" href="../../index.html">1Lines</a>

      <button class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#">
        <i class="fas fa-bars"></i>
      </button>

      <!-- Navbar Search -->
      

      <!-- Navbar -->
      

    </nav>

    <div id="wrapper">

      <!-- Sidebar -->
      <ul class="sidebar navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="../../index.html">
            <i class="fas fa-fw fa-tachometer-alt"></i>
            <span>요약</span>
          </a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="pagesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-fw fa-folder"></i>
            <span>목록</span>
          </a>
          <div class="dropdown-menu show" aria-labelledby="pagesDropdown">
            <h6 class="dropdown-header">Node JS</h6>
            <a class="dropdown-item" href="../nodejs/nodejs_001.html">Node JS - Reactor</a>
        </li>
      </ul>

      <div id="content-wrapper">
        <div class="container-fluid">
          <!-- Breadcrumbs-->
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a href="#">Dashboard</a>
            </li>
            <li class="breadcrumb-item active">Node JS Pattern</li>
          </ol>

          <!-- Area Chart Example-->
          <div class="card mb-3">
            <div class="card-header">
            </div>
            <div class="card-body">
                <div class="accordion" id="accordionExample">
                    <div class="card">
                      <div class="card-header" id="headingOne">
                        <h2 class="mb-0">
                          <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            I/O는 속도가 느리다. 
                          </button>
                        </h2>
                      </div>
                  
                      <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                        <div class="card-body">
                        </div>
                      </div>
                    </div>
                    <div class="card">
                      <div class="card-header" id="headingTwo">
                        <h2 class="mb-0">
                          <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            블로킹 I/O
                          </button>
                        </h2>
                      </div>
                      <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                        <div class="card-body">
                          전통적인 블로킹 I/O 프로그래밍에서는 I/O 요청에 해당하는 함소 호출은 작업이 완료될 때 까지 스레드의 실행이 차단됩니다. 블로킹 I/O를 사용하여 구현된 웹서버가 동일한 스레드에서 여러 연결을 처리할 수 없다는 것은 자명하다. 
                          각 소켓에서의 모든 I/O 작업이 다른 연결 처리를 차단할 것이기 때문입니다. 이러한 이유로 웹 서버에서 동시성을 처리하기 위한 전통적인 접근 방식은 처리해야하는 각각의 동시 연결에 대해 새로운 스레드 또는 프로세스를 시작하거나 풀에서 가져온 스레드를 
                          재사용 하는 것입니다. 
                        </div>
                      </div>
                    </div>
                    <div class="card">
                      <div class="card-header" id="headingThree">
                        <h2 class="mb-0">
                          <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                           논 블로킹 I/O
                          </button>
                        </h2>
                      </div>
                      <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                        <div class="card-body">
                          블로킹 I/O 외에도 대부분의 최신 운영 체제는 논 블로킹 I/O라고 하는, 리소스를 액세스하는 또 다른 매커니즘을 지원합니다. 시스템 호출은 데이터가 읽히거나 쓰여질때까지 기다리지 않고 즉시 반환됩니다. 호출하는 순간에 결과를 사용할 수 없는 경우, 
                          이 함수는 단순히 미리 정의된 상수를 반환하여 그 순간에 반환할 수 있는 데이터가 없음을 나타냅니다. <br>
                          일단 자원이 논 블로킹 모드에 있으면 자원에 읽을 준비가 된 데이터가 없을 경우, 모든 읽기 조장은 코드 EAGAIN을 반환하여 실패를 알립니다. 
                          <hr>
                          논 블로킹 I/O에 엑세스하는 가장 기본적인 패턴은 실제 데이터가 반환될 때 까지 루프 내에서 리소스를 적극적으로 폴링(poll)하는 것입니다. 이것을 busy-waiting이라고 합니다. 
                          <pre class="javascript" >
                            <code>
resources = [socketA, socketB, socketC];
while(!resources.isEmpty()){
  for ( i = 0; i &lt; resources.length ; i ++){
    resource = reources[i];
    // 읽기를 시도합니다. 
    let data = resource.data();
    if(data == NO_DATA_AVAILABLE)
      // 당장 읽을 데이터가 없습니다. 
      continue;
    if(data == RESOURCE_CLOSED)
      // 데이터 리소스가 닫혔기 대문에 , 리소스 목록에서 제거합니다. 
      resources.remove(i);
    else
      // 데이터를 도착하여 이를 처리합니다. 
      consumeData(data);
  }
}
                            </code>
                          </pre>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="card">
                      <div class="card-header" id="headingFour">
                        <h2 class="mb-0">
                          <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseTwo">
                            이벤트 디멀티플렉싱
                          </button>
                        </h2>
                      </div>
                      <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordionExample">
                        <div class="card-body">
                          Busy-waiting은 논 블로킹 리소스를 처리하기 위한 이상적인 기술은 아니지만 다행스럽게도 대부분의 최신 운영체제는 효율적인 논 블로킹 리소스 처리를 위한 기본적인 메커니즘을 제공합니다. 
                          이 메커니즘을 동기 이벤트 디멀티플렉서 또는 이벤트 통지 인터페이스라고 합니다. 이 구성요소는 감시된 일련의 리소스들로부터 들어오는 I/O 이벤트를 수집하여 큐에 넣고 처리할 수 있는 새 이벤트가 
                          있을 때까지 차단합니다. 
                          <pre class="javascript" >

                            <code>
// Event Loop 방식 
socketA, pipeB;
watchedList.add(socketA, FOR_READ);
watchedList.add(pipeB, FOR_READ);
while(events = demultiplexer.watch(watchedList)) { 
  //이벤트 루프 
  foreach(event in events){
    // 여기서 read는 블록되지 않으며 비어 있을지언정, 항상 블록되지 않습니다. 
    data = event.resource.read();
    if(data === RESOURCE_CLOSED)
      // 리소스가 닫혔기 때문에, 리소스 목록에서 제거합니다. 
      demultiplexer.unwatch(event.resource);
    else  
      // 실제 데이터가 도착하여 이를 처리합니다
      consumeData(data);
  }

}
                            </code>
                          </pre>
                          이벤트 디멀티플렉서에 의해 반한된 각 이벤트가 처리됩니다. 이 시점에서 각 이벤트와 관련된 리소스는 읽기 작업을 위한 준비가 되어 있으며, 차단되지 않은 상황이라는 것이 보증됩니다. 모든 이벤트가 처리되고 나면, 
                          이 흐름은 다시 디멀티 플렉서에서 처리 가능한 이벤트가 발생할 때 까지 차단됩니다. 이를 이벤트 루프라고 합니다. 
                          <hr>
                          <img src="./EventLoop.png" class="img-fluid" alt="">
                          <hr>
                          위의 이미지는 동기 이벤트 디멀티 플렉서 및 논 블로킹 I/O를 사용하여 단일 스레드 어플리케이션에서 동시성이 작동하는 방식을 이해하는 데 도움이 될 것입니다. 
                          하나의 스레드만 사용하더라도 다중 I/O 사용 작업을 동시에 실행할 수 있는 능력을 손상 시키지 않습니다. 
                          작업은 여러 스레드로 분산되지 않고 시간에 따라 분산됩니다. 이는 이미지에 명확하게 표시된 것처럼 스레드의 유휴 시간을 최소하하는 장점이 있습니다. 하나의 스레드만을 갖는다는 것은 
                          프로그래머가 일반적으로 동시성에 접근하는 방식에 유익한 영향을 미칩니다. 
                        </div>
                      </div>
                    </div>  
                    <div class="card">
                    <div class="card-header" id="heading6">
                      <h2 class="mb-0">
                        <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapse6" aria-expanded="false" aria-controls="collapse6">
                          Reactor 패턴 
                        </button>
                      </h2>
                    </div>
                    <div id="collapse6" class="collapse" aria-labelledby="heading6" data-parent="#accordionExample">
                      <div class="card-body">

                      </div>
                    </div>
                  </div> 
                  
                  <div class="card">
                      <div class="card-header" id="heading5">
                        <h2 class="mb-0">
                          <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
                            
                          </button>
                        </h2>
                      </div>
                      <div id="collapse5" class="collapse" aria-labelledby="heading5" data-parent="#accordionExample">
                        <div class="card-body">
  
                        </div>
                      </div>
                    </div>  
            </div>
            <div class="card-footer small text-muted"></div>
            </div>
        </div>
        <!-- /.container-fluid -->

        <!-- Sticky Footer -->
        <footer class="sticky-footer">
          <div class="container my-auto">
            <div class="copyright text-center my-auto">
              <span>Copyright © 1Lines Labs 2019</span>
            </div>
          </div>
        </footer>

      </div>
      <!-- /.content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    

    <!-- Bootstrap core JavaScript-->
    <script src="../../vendor/jquery/jquery.min.js"></script>
    <script src="../../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="../../vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Page level plugin JavaScript-->
    <script src="../../vendor/chart.js/Chart.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="../../js/sb-admin.min.js"></script>

  </body>

</html>
